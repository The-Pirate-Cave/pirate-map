(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{48312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(29922)}])},29922:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Y}});var s=n(10797),a=n(85893),r=n(72259),i=n(6158),o=n.n(i),c=n(9008),l=n.n(c),u=n(11163),d=n(67294),m=n(11426),p=n.n(m),h=n(6876),y=n(63564),g=n(47568),x=n(41799),f=n(69396),b=n(99534),v=n(70655),w=n(79911),j=n(61744),N=n(86501),k=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"Fuck","type":"error"},{"inputs":[],"name":"NoMoneyForYa","type":"error"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"coins","type":"uint256"}],"name":"ChestBurried","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"coins","type":"uint256"}],"name":"FoundTreasure","type":"event"},{"inputs":[{"internalType":"bytes32","name":"chest","type":"bytes32"},{"internalType":"address","name":"keuy","type":"address"}],"name":"burryChest","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"name":"chestKeuys","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"chest","type":"bytes32"}],"name":"coinsInChest","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"confiscatedCoins","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"cursed","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"chest","type":"bytes32"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"bytes","name":"treasure","type":"bytes"}],"name":"diggChest","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"pirates","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"}]');var C=function(e,t){var n=(0,y.PJ)((0,f.Z)((0,x.Z)({},t),{addressOrName:"0x7da73c1bb5a0964cac054fe302a43187db58b1b2",contractInterface:k,functionName:e})).config;return(0,y.GG)(n)},P=n(70794);function Z(){}function T(e){var t;return t="string"===typeof e?e:e?e.toString():"0",new P.Z(t)}var M=n(39883),L=n(29251),_=n(56371);function E(e){var t=e.map((function(e){var t=e.longitude,n=e.latitude;return(0,_.keccak256)(L.Y0(t))+(0,_.keccak256)(L.Y0(n))})).join("");return(0,_.keccak256)(L.Y0(t))}function I(e){var t=e.map((function(e){return[e.longitude,e.latitude].join("")})).join("");return(0,_.keccak256)(L.Y0(t))}var O=function(){var e=function(e,t){return Math.random()*(t-e)+e};(0,M.Z)({angle:e(55,125),spread:e(50,70),particleCount:e(50,100),origin:{y:.6}})};var S=function(e){var t=e.geoLocations,n=e.amount,s=(0,b.Z)(e,["geoLocations","amount"]),i=(0,u.useRouter)(),o=E(t),c=I(t),l=new w.Wallet(o),d=(0,y.mA)().address,m=(0,y.KQ)({addressOrName:d}).data,p=(0,r.We)().openConnectModal,h=void 0===p?Z:p,k=C("burryChest",{args:[c,l.address],overrides:{from:d,value:j.parseEther("".concat(n||0)).toString()}}).writeAsync;function P(){return(P=(0,g.Z)((function(){var e;return(0,v.__generator)(this,(function(s){switch(s.label){case 0:if(console.log("amount: ",n),console.log("balance: ",m),console.log("geoLocations",t),console.log("result hash: ",o),console.log("pirateSigner",l),!d)return h(),[2];if(0===t.length)return N.ZP.error("No PINs were added"),[2];if(!n)return N.ZP.error("How much treasure you want to bury? Enter amount!"),[2];if(T(m.formatted).lt(n))return N.ZP.error("You are too poor"),[2];if(c===o)return N.ZP.error("Something went wrong"),[2];s.label=1;case 1:return s.trys.push([1,4,,5]),[4,null===k||void 0===k?void 0:k()];case 2:return[4,null===(e=s.sent())||void 0===e?void 0:e.wait()];case 3:return s.sent(),O(),[3,5];case 4:return s.sent(),N.ZP.error("User rejected a transaction or something went wrong"),[3,5];case 5:return[2]}}))}))).apply(this,arguments)}return(0,a.jsxs)("button",(0,f.Z)((0,x.Z)({onClick:function(){return P.apply(this,arguments)},className:"flex whitespace-nowrap rounded-xl bg-indigo-600 py-3 px-4 align-middle font-bold text-white"},s),{children:[(0,a.jsx)("img",{src:"".concat(i.basePath,"/assets/icons/pirate.png"),className:"mr-3 -mt-1 w-7",alt:""}),"Bury a treasure"]}))};var F=function(e){var t=e.geoLocations,n=e.amount,s=E(t),i=I(t),o=new w.Wallet(s),c=(0,y.mA)().address,l=((0,y.KQ)({addressOrName:c}).data,(0,u.useRouter)()),d=function(e){var t=e.map((function(e){return[e.longitude,e.latitude].join("")})).join("");return L.Y0(t)}(t),m=o.signMessage(d);o.signMessage(d).then((function(e){w.verifyMessage(d,e)}));var p=(0,r.We)().openConnectModal,h=void 0===p?Z:p,x=C("diggChest",{args:[i,j.parseEther("".concat(n||0)).toString(),m],overrides:{gasLimit:1e7}}),f=(x.data,x.isLoading,x.isSuccess,x.writeAsync);function b(){return(b=(0,g.Z)((function(){var e;return(0,v.__generator)(this,(function(a){switch(a.label){case 0:if(!c)return h(),[2];if(0===t.length)return N.ZP.error("No PINs were added"),[2];if(!n)return N.ZP.error("How much treasure you want to dig out? Enter amount!"),[2];if(i===s)return N.ZP.error("Something went wrong"),[2];a.label=1;case 1:return a.trys.push([1,4,,5]),[4,null===f||void 0===f?void 0:f()];case 2:return[4,null===(e=a.sent())||void 0===e?void 0:e.wait()];case 3:return a.sent(),O(),[3,5];case 4:return a.sent(),N.ZP.error("User rejected a transaction or something went wrong"),[3,5];case 5:return[2]}}))}))).apply(this,arguments)}return(0,a.jsxs)("button",{onClick:function(){return b.apply(this,arguments)},className:"flex w-[150px] rounded-xl bg-yellow-700 py-3 px-4 align-middle font-bold text-white",children:[(0,a.jsx)("img",{src:"".concat(l.basePath,"/assets/icons/shovel.svg"),className:"-my-1 mr-3 w-7",alt:""}),"Withdraw"]})};var H=function(){var e=(0,d.useState)(null),t=(e[0],e[1]);return(0,d.useEffect)((function(){}),[]),{createMap:function(e,n){var s=n.latitude,a=n.longitude;return new Promise((function(n){o().accessToken="pk.eyJ1IjoiZDNwb3J0aWxsbyIsImEiOiJja3ljam5qN24wcTBvMzBueGNtZ25mdXh0In0.KYOQ-CJFDcaEpyH-Ebe8iQ";var r=new(o().Map)({container:e,style:"mapbox://styles/mapbox/streets-v11",center:[a,s],zoom:15});t(r),n(r)}))}}},Y=function(){var e=(0,h.sV)(),t=e.position,n=e.watching,i=e.watch,c=e.unwatch,m=H().createMap,g=(0,d.useRef)(null),x=(0,d.useState)([]),f=x[0],b=x[1],v=(0,d.useState)(0),w=v[0],j=v[1],N=(null===t||void 0===t?void 0:t.coords)||{},k=N.longitude,C=N.latitude,P=(0,y.mA)().address,Z=(0,u.useRouter)();(0,y.KQ)({addressOrName:P}).data;return(0,d.useEffect)((function(){g.current&&t&&(m(g.current,{longitude:k,latitude:C}).then((function(e){e.addControl(new(o().NavigationControl)),e.addControl(new(o().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},showUserLocation:!0,trackUserLocation:!0,showUserHeading:!0}))})),g.current=null)}),[g,t]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l(),{children:[(0,a.jsx)("title",{children:"Pirate Cave"}),(0,a.jsx)("meta",{name:"description",content:"Generated by @rainbow-me/create-rainbowkit"}),(0,a.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,a.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:!0}),(0,a.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Inter:wght@300,500&display=swap",rel:"stylesheet"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsxs)("section",{className:"h-screen md:flex",children:[(0,a.jsx)("div",{className:"h-64 md:h-full md:w-1/2",children:(0,a.jsx)("div",{ref:g,className:"h-full w-full p-2 text-center",id:"map-render",children:"Loading..."})}),(0,a.jsxs)("div",{className:"z-10 py-5 px-4 md:w-1/2 md:px-10",children:[(0,a.jsx)("div",{className:"",children:(0,a.jsx)(r.NL,{})}),(0,a.jsxs)("div",{className:"mt-5 grid place-items-center",children:[(0,a.jsx)("div",{className:"mx-auto block w-3/12 md:mx-10",children:(0,a.jsx)("img",{src:"".concat(Z.basePath,"/assets/icons/logotype.svg"),alt:""})}),(0,a.jsx)("h2",{className:"mx-3 text-2xl md:text-3xl",children:"Hide your crypto assets in a secret location"}),(0,a.jsx)("hr",{className:"my-5 w-full border-gray-600"})]}),(0,a.jsx)("article",{className:"mb-20",children:(0,a.jsxs)("article",{className:"",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("article",{className:"mb-5",children:[(0,a.jsxs)("div",{className:"mb-2 flex align-middle",children:[(0,a.jsx)("h4",{className:"inline font-bold",children:"Live Watching: "}),(0,a.jsx)(p(),{className:"mx-2",checked:n,onChange:function(){n?c():i()}})]}),(0,a.jsx)("div",{className:"mb-5",children:t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{children:[(0,a.jsx)("b",{className:"text-yellow-600",children:"Latitude:"})," ",C]})," ",(0,a.jsxs)("span",{children:[(0,a.jsx)("b",{className:"text-yellow-600",children:"Longitude:"})," ",k]})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("button",{disabled:!t,className:"flex rounded-xl border-2 border-indigo-500 bg-indigo-600 p-2 px-4 align-middle capitalize text-white",onClick:function(){b((0,s.Z)(f).concat([{longitude:T(k).toFixed(4),latitude:T(C).toFixed(4)}]))},children:[(0,a.jsx)("img",{src:"".concat(Z.basePath,"/assets/icons/map-pin.png"),className:"mr-3 inline w-6",alt:""}),"PIN your location"]})})]}),(0,a.jsx)("h3",{className:"text-xl font-bold",children:"Pins"}),0===f.length&&(0,a.jsx)("p",{children:"No PINs were saved"}),f.map((function(e,t){return(0,a.jsxs)("div",{className:"my-1 flex align-middle",children:[(0,a.jsx)("svg",{className:"mr-2 w-7 stroke-amber-50",version:"1.1",viewBox:"0 0 91 91",children:(0,a.jsx)("g",{children:(0,a.jsx)("path",{d:"M34.7,73.3V48.4l34.6-10.1c0.7-0.2,1.2-0.8,1.2-1.5s-0.4-1.4-1-1.7L33.7,20.5c-0.5-0.2-1.1-0.2-1.6,0.2 c-0.5,0.3-0.7,0.8-0.7,1.4v51.2H34.7z"})})}),(0,a.jsx)("input",{disabled:!0,onChange:function(){},className:"w-[200px] rounded-xl border-2 border-gray-200 p-2 text-black disabled:bg-gray-300",type:"text",value:[e.latitude,e.longitude].join(", "),placeholder:"Location"}),(0,a.jsx)("button",{onClick:function(){b((0,s.Z)(f.slice(0,t)).concat((0,s.Z)(f.slice(t+1,f.length))))},className:"bg-gray mx-2 flex rounded-md bg-red-600 px-3 align-middle text-white",children:(0,a.jsx)("img",{src:"".concat(Z.basePath,"/assets/icons/remove.svg"),alt:"",className:"mt-3.5 -mb-1 w-5"})})]},t)}))]}),(0,a.jsxs)("div",{className:"mb-5",children:[(0,a.jsx)("hr",{className:"my-5 border-gray-600"}),(0,a.jsxs)("label",{children:[(0,a.jsx)("b",{children:"Amount (ETH):"}),(0,a.jsx)("div",{className:"mt-5",children:(0,a.jsx)("input",{className:"border-2 p-2 text-black",type:"number",onChange:function(e){j(e.target.value)}})})]})]}),(0,a.jsxs)("article",{className:"mt-16 flex",children:[(0,a.jsx)("div",{className:"mb-5 mr-2",children:(0,a.jsx)(S,{amount:w,geoLocations:f})}),(0,a.jsx)("div",{className:"mb-5",children:(0,a.jsx)(F,{amount:w,geoLocations:f})})]})]})})]})]})]})}}},function(e){e.O(0,[634,257,774,888,179],(function(){return t=48312,e(e.s=t);var t}));var t=e.O();_N_E=t}]);